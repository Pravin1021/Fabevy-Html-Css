!function(n){"use strict";var t,e,o,r,i,c,s,u;!function(n){n.TRACKING_ACCEPTED="trackingConsentAccepted",n.TRACKING_DECLINED="trackingConsentDeclined",n.MARKETING_ACCEPTED="marketingConsentAccepted",n.STATISTICS_ACCEPTED="statisticsConsentAccepted",n.PREFERENCES_ACCEPTED="preferencesConsentAccepted",n.ATTRIBUTION_ACCEPTED="attributionConsentAccepted",n.MARKETING_DECLINED="marketingConsentDeclined",n.STATISTICS_DECLINED="statisticsConsentDeclined",n.PREFERENCES_DECLINED="preferencesConsentDeclined",n.ATTRIBUTION_DECLINED="attributionConsentDeclined",n.CONSENT_COLLECTED="visitorConsentCollected"}(t||(t={})),function(n){n.V2_0="2.0",n.V2_1="2.1"}(e||(e={})),function(n){n.ACCEPTED="yes",n.DECLINED="no",n.NO_INTERACTION="no_interaction",n.NO_VALUE=""}(o||(o={})),function(n){n.NO_VALUE="",n.ACCEPTED="1",n.DECLINED="0"}(r||(r={})),function(n){n.GDPR="GDPR",n.CCPA="CCPA",n.NO_VALUE=""}(i||(i={})),function(n){n.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL",n.GDPR="GDPR",n.GDPR_BLOCK_ALL="GDPR_BLOCK_ALL",n.CCPA="CCPA"}(c||(c={})),function(n){n.MARKETING="m",n.STATISTICS="s",n.PREFERENCES="p",n.ATTRIBUTION="t"}(s||(s={})),function(n){n.MARKETING="marketing",n.STATISTICS="statistics",n.PREFERENCES="preferences",n.ATTRIBUTION="attribution"}(u||(u={}));const C=["lim","v","con","reg"];function E(n,t){const e=t.slice().sort();return n.length===t.length&&n.slice().sort().every((n,t)=>n===e[t])}function a(){const n=document.cookie?document.cookie.split("; "):[];let t=void 0;if(n.forEach(n=>{const[e,o]=n.split("=");if("_tracking_consent"===decodeURIComponent(e)){var r=JSON.parse(decodeURIComponent(o));t=r}}),void 0!==t&&!function(n){if(![e.V2_0,e.V2_1].includes(n.v))return!0;if(n.v===e.V2_0)return!E(Object.keys(n),C);return!E(Object.keys(n).filter(n=>"id"!==n),C)}(t))return t}function f(){try{let n=a();if(!n)return;return n.v===e.V2_0?function(n){const t=Object.assign(Object.assign({},n.con),{GDPR:I(n)?D(n.con.GDPR):void 0});void 0===t.GDPR&&delete t.GDPR;return{con:t,reg:n.reg,v:e.V2_1,lim:n.lim}}(n):n}catch(n){return}}function T(){const n=f();if(l(n))return D(r.NO_VALUE);const t=n.con;switch(typeof t.GDPR){case"undefined":return D(r.NO_VALUE);case"string":return D(t.GDPR);default:return t.GDPR}}function A(){const n=f();if(l(n))return r.NO_VALUE;const t=n.con.CCPA;return void 0===t?r.NO_VALUE:t}function l(n=null){return null===n&&(n=f()),void 0===n}function D(n){return{[s.MARKETING]:n,[s.STATISTICS]:n,[s.PREFERENCES]:n,[s.ATTRIBUTION]:n}}function I(n){const t=[c.GDPR,c.GDPR_BLOCK_ALL];return n.lim.some(n=>t.includes(n))&&i.GDPR in n.con}const N={"":[],GDPR:[c.GDPR,c.GDPR_BLOCK_ALL],CCPA:[c.CCPA_BLOCK_ALL,c.CCPA]};function _(n){document.dispatchEvent(new CustomEvent(n,{detail:{}}))}function d(n){!0===n.marketing?_(t.MARKETING_ACCEPTED):_(t.MARKETING_DECLINED),!0===n.statistics?_(t.STATISTICS_ACCEPTED):_(t.STATISTICS_DECLINED),!0===n.preferences?_(t.PREFERENCES_ACCEPTED):_(t.PREFERENCES_DECLINED),!0===n.attribution?_(t.ATTRIBUTION_ACCEPTED):_(t.ATTRIBUTION_DECLINED),_(t.CONSENT_COLLECTED)}function P(n,e,o){const r=new XMLHttpRequest,i=JSON.stringify(n);r.open("POST","/set_tracking_consent.json",!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4!==r.readyState)return;const i=function(n){try{return JSON.parse(n)}catch(n){return{error:"Unknown error"}}}(r.responseText);var c;0===(c=r.status)||200>=c&&c<400?(!function(n,e){void 0!==n.consent?(!0===n.consent?_(t.TRACKING_ACCEPTED):_(t.TRACKING_DECLINED),e&&d({marketing:n.consent,preferences:n.consent,statistics:n.consent,attribution:n.consent})):void 0!==n.granular_consent&&d(n.granular_consent)}(n,o),e(null,i)):e(i)},r.send(i)}function R(n,t){if(l()){const n="Shop is not configured to block privacy regulation in online store settings.";return console.warn(n),t({error:n})}if(function(n){if(q()){if("boolean"!=typeof n&&"object"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean or object consent value");if("object"==typeof n){const t=Object.values(u);if(!E(t,Object.keys(n)))throw TypeError(`The submitted consent object should have exactly these keys: ${t.join(", ")}.`)}}else if("boolean"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean consent value")}(n),"function"!=typeof t)throw TypeError("setTrackingConsent must be called with a callback function");if("object"==typeof n){const e=h(n.statistics),o=G(n.statistics);return P(Object.assign(Object.assign({granular_consent:n},null!==e&&{referrer:e}),null!==o&&{landing_page:o}),t,q())}{const e=h(n),o=G(n);return P(Object.assign(Object.assign({consent:n},null!==e&&{referrer:e}),null!==o&&{landing_page:o}),t,q())}}function L(n,t){if("boolean"!=typeof n)throw TypeError("setCCPAConsent must be called with a boolean consent value");if("function"!=typeof t)throw TypeError("setCCPAConsent must be called with a callback function");return P({ccpa_consent:n},t,q())}function S(n){return l()?o.NO_VALUE:n===r.NO_VALUE?o.NO_INTERACTION:function(n){switch(n){case r.ACCEPTED:return o.ACCEPTED;case r.DECLINED:return o.DECLINED;default:return o.NO_VALUE}}(n)}function O(){if(l())return o.NO_VALUE;const n=T();return n[s.MARKETING]===r.ACCEPTED&&n[s.STATISTICS]===r.ACCEPTED?o.ACCEPTED:n[s.MARKETING]===r.DECLINED||n[s.STATISTICS]===r.DECLINED?o.DECLINED:o.NO_INTERACTION}function p(){const n=function(){const n=f();return l(n)?i.NO_VALUE:n.reg}();return n in i?n:i.NO_VALUE}function g(){return function(){const n=f();return l(n)?{limit:[]}:{limit:n.lim}}()}function h(n){return v(c.GDPR_BLOCK_ALL)&&n?m()?document.referrer:"":null}function G(n){return v(c.GDPR_BLOCK_ALL)&&n?m()?window.location.pathname+window.location.search:"/":null}function m(){if(""===document.referrer)return!0;const n=document.createElement("a");return n.href=document.referrer,window.location.hostname!=n.hostname}function w(){return v(c.GDPR)||v(c.GDPR_BLOCK_ALL)}function b(){const n=p();if(n===i.NO_VALUE)return!1;const t=g();return 0!==t.limit.length&&t.limit.some(t=>function(n,t){return N[n].includes(t)}(n,t))}function y(){return!!l()||function(){if(!w())return!0;const n=T();return n[s.MARKETING]===r.ACCEPTED&&n[s.STATISTICS]===r.ACCEPTED||n[s.MARKETING]!==r.DECLINED&&n[s.STATISTICS]!==r.DECLINED&&p()!==i.GDPR}()}function v(n){return g().limit.includes(n)}function k(){return!!l()||!1!==y()&&function(){if(v(c.CCPA_BLOCK_ALL)){return p()!==i.CCPA}if(v(c.CCPA)){return A()!==r.DECLINED}return!0}()}function B(){return p()===i.GDPR&&b()&&O()===o.NO_INTERACTION}function K(){return S(A())}function U(){return p()===i.CCPA&&g().limit.includes(c.CCPA)&&K()===o.NO_INTERACTION}function V(n){if(!w())return!0;const t=T();return t[n]===r.ACCEPTED||t[n]!==r.DECLINED&&p()!==i.GDPR}function j(){return V(s.STATISTICS)}function M(){return V(s.PREFERENCES)}function F(){return V(s.ATTRIBUTION)}function J(){return V(s.MARKETING)}function q(){return function(){const n=a();switch(null==n?void 0:n.v){case"2.0":return e.V2_0;case"2.1":return e.V2_1;default:return void console.warn("No cookie found or unknown version "+(null==n?void 0:n.v))}}()===e.V2_1}function x(){const n={getTrackingConsent:O,setTrackingConsent:R,userCanBeTracked:y,getRegulation:p,isRegulationEnforced:b,getShopPrefs:g,shouldShowGDPRBanner:B,userDataCanBeSold:k,setCCPAConsent:L,getCCPAConsent:K,shouldShowCCPABanner:U};return q()&&(n.siteStatisticsCanBeCollected=j,n.preferencesCanBeStored=M,n.marketingCanBeAttributed=F,n.marketingProfileCanBeCreated=J),n}window.Shopify=window.Shopify?window.Shopify:{},window.Shopify.customerPrivacy=window.Shopify.trackingConsent=x(),n.shopifyConsentAPI=x,Object.defineProperty(n,"__esModule",{value:!0})}({});
