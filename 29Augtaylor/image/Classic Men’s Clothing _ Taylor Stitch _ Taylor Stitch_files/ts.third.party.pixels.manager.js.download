"use strict";var CookieBotConsentType;(function(e){e.necessary="necessary",e.marketing="marketing",e.statistics="statistics",e.preferences="preferences"})(CookieBotConsentType||(CookieBotConsentType={}));var TSCookieBotHandler;(function(e){var n="TSCookieBotHandler";e.init=function(){T3Core.Debug("".concat(n," current Cookiebot state, ").concat(JSON.stringify(Cookiebot.consent),", ").concat(JSON.stringify(Cookiebot.regulations))),TSThirdPartyPixelsManager.saveConsentData(Cookiebot.consent),window.addEventListener("CookiebotOnAccept",function(c){T3Core.Debug("".concat(n," CookiebotOnAccept event called, ").concat(JSON.stringify(Cookiebot.consent),", ").concat(JSON.stringify(Cookiebot.regulations))),TSThirdPartyPixelsManager.loadConsentedPixels(Cookiebot.consent),TSThirdPartyPixelsManager.saveConsentData(Cookiebot.consent)},!1),window.addEventListener("CookiebotOnLoad",function(c){T3Core.Debug("".concat(n," CookiebotOnLoad event called"))},!1),window.addEventListener("CookiebotOnDecline",function(c){T3Core.Debug("".concat(n," CookiebotOnDecline event called")),TSThirdPartyPixelsManager.saveConsentData(Cookiebot.consent),TSThirdPartyPixelsManager.setShopifyCustomerPrivacy(Cookiebot.declined)},!1),window.addEventListener("CookiebotOnDialogInit",function(c){T3Core.Debug("".concat(n," CookiebotOnDialogInit event called"))},!1),window.addEventListener("CookiebotOnDialogDisplay",function(c){T3Core.Debug("".concat(n," CookiebotOnDialogDisplay event called"))},!1),window.addEventListener("CookiebotOnTagsExecuted",function(c){T3Core.Debug("".concat(n," CookiebotOnTagsExecuted event called"))},!1),window.addEventListener("load",function(){try{var c=window.Shopify;c.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],function(o){if(o)throw T3Core.Debug("".concat(n," ").concat(o)),o;T3Core.Debug("".concat(n," consent-tracking-api loaded")),"Cookiebot"in window?(Cookiebot.consented||Cookiebot.declined)&&TSThirdPartyPixelsManager.setShopifyCustomerPrivacy(!Cookiebot.declined):TSThirdPartyPixelsManager.setShopifyCustomerPrivacy(!1)})}catch(o){T3Core.Debug("".concat(n," ").concat(o))}})}})(TSCookieBotHandler||(TSCookieBotHandler={}));var TSDefaultPolicyCookieHandler;(function(e){var n="TSDefaultPolicyCookieHandler";e.getCookiePolicy=function(){return T3Core.CookieManager.ReadCookie(TSCookiePolicy.cookieName)},e.init=function(){window.addEventListener("load",function(){var c=T3Core.GetQueryStringByKey("signup");c!==""&&c==="0"&&(T3Core.Debug("3PP signup key is 0, force feed."),TSCookiePolicy.policy_accepted=!0);var o=e.getCookiePolicy(),t=TSThirdPartyPixelsManagerOpts.isCheckoutPage;if(o||t){var i=TSThirdPartyPixelsManager.getConsentData();i&&(T3Core.Debug("".concat(n," loading only consented pixels: ").concat(JSON.stringify(i))),TSThirdPartyPixelsManager.loadConsentedPixels(i))}})}})(TSDefaultPolicyCookieHandler||(TSDefaultPolicyCookieHandler={}));var TSThirdPartyPixelsManager;(function(e){var n="TSThirdPartyPixelsManager",c="ts_consent_data";e.ThirdPartyPixelsData=[],e.init=function(){TSThirdPartyPixelsManagerOpts.cookieBotEnabled?TSCookieBotHandler.init():TSDefaultPolicyCookieHandler.init()},e.loadPixel=function(o){var t=o.funcToCall,i=e.ThirdPartyPixelsData.filter(function(a){return a.funcToCall.name===t.name}).length;i===0&&e.ThirdPartyPixelsData.push(o),TSThirdPartyPixelsManagerOpts.cookieBotEnabled||TSCookiePolicy.policy_accepted&&o.funcToCall()},e.canInitKlaviyoModal=function(){return TSThirdPartyPixelsManagerOpts.cookieBotEnabled?Cookiebot.consent.marketing:!0},e.showFeedback=function(){try{var o=window.Shopify.customerPrivacy;T3Core.Debug("".concat(n," user tracking ").concat(o.userCanBeTracked()?"en":"dis","abled"))}catch(t){T3Core.Debug("".concat(n," error ").concat(t))}},e.setShopifyCustomerPrivacy=function(o){try{window.Shopify.customerPrivacy.setTrackingConsent(o,e.showFeedback)}catch(t){T3Core.Debug("".concat(n," error ").concat(t))}},e.saveConsentData=function(o){try{localStorage.setItem(c,JSON.stringify(o))}catch(t){T3Core.Debug("".concat(n," ").concat(t))}},e.getConsentData=function(){var o=null;try{o=JSON.parse(localStorage.getItem(c))}catch(t){}return o},e.loadConsentedPixels=function(o){try{var t=[];o.marketing&&t.push.apply(t,e.ThirdPartyPixelsData.filter(function(i){return i.consentType===CookieBotConsentType.marketing})),o.statistics&&t.push.apply(t,e.ThirdPartyPixelsData.filter(function(i){return i.consentType===CookieBotConsentType.statistics})),o.preferences&&t.push.apply(t,e.ThirdPartyPixelsData.filter(function(i){return i.consentType===CookieBotConsentType.preferences})),t.forEach(function(i){try{i.funcToCall()}catch(a){console.error(a)}}),T3Core.Debug("".concat(n," pixels loaded: ").concat(t.length))}catch(i){T3Core.Debug("".concat(n," ").concat(i))}}})(TSThirdPartyPixelsManager||(TSThirdPartyPixelsManager={})),TSThirdPartyPixelsManager.init();
//# sourceMappingURL=/s/files/1/0070/1922/t/12/assets/ts.third.party.pixels.manager.js.map?v=8996305976650137951660936193
